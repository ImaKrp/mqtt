<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MQTT Chat</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js"
      type="text/javascript"
    ></script>

    <link rel="stylesheet" href="style.css" />
    <script src="./js/main.js" defer></script>
    <script src="./js/dom/index.js" defer></script>
    <script src="./js/utils/handlers.js" defer></script>
    <script src="./js/utils/storage.js" defer></script>
    <script src="./js/topics/chat.js" defer></script>
    <script src="./js/topics/controller.js" defer></script>

    <script
      src="https://kit.fontawesome.com/7d89d2f34b.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="chat-container">
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="app-title">
            <span class="icon"><i class="fa-solid fa-comment"></i></span>
            <h1>MQTT App</h1>

            <button class="close-btn"><i class="fa-solid fa-xmark"></i></button>
          </div>
        </div>

        <div class="sidebar-column">
          <div class="contacts-section">
            <h3 class="section-title">
              <span class="icon"><i class="fa-solid fa-user"></i></span>
              Contatos
            </h3>
            <div id="contacts-list" class="chat-list"></div>
          </div>

          <div class="groups-section">
            <h3 class="section-title">
              <span class="icon"><i class="fa-solid fa-users"></i></span>
              Grupos
            </h3>
            <div id="groups-list" class="chat-list"></div>
          </div>
        </div>
      </div>

      <div class="main-content">
        <header class="chat-header">
          <div class="header-left">
            <button id="open-sidebar"><i class="fa-solid fa-bars"></i></button>
            <div class="connection-status">
              <span
                id="status-indicator"
                class="status-indicator offline"
              ></span>
              <span id="status-text">Desconectado</span>
            </div>
          </div>

          <div class="header-right">
            <div class="user-input">
              <label for="username">Seu nome:</label>
              <input type="text" id="username" placeholder="Digite seu nome" />
            </div>

            <div class="action-buttons">
              <button id="connect-btn" class="btn btn-primary">
                <i class="fa-solid fa-signal"></i> Conectar
              </button>
              <button
                id="new-chat-btn"
                class="btn btn-secondary"
                style="display: none"
              >
                <i class="fa-solid fa-plus"></i> Novo Chat
              </button>
              <button
                id="disconnect-btn"
                class="btn btn-danger"
                style="display: none"
              >
                <i class="fa-solid fa-xmark"></i> Desconectar
              </button>
            </div>
          </div>
        </header>

        <div class="chat-info" style="display: none">
          <div class="chat-avatar">
            <span id="chat-avatar-text">A</span>
          </div>
          <div class="chat-details">
            <h3 id="chat-name">Nome do Chat</h3>
            <p id="chat-type">Contato</p>
          </div>
        </div>

        <div class="chat-area">
          <div id="welcome-screen" class="welcome-screen">
            <div class="welcome-content">
              <span class="welcome-icon"
                ><i class="fa-solid fa-comment"></i
              ></span>
              <h2>Selecione um chat</h2>
              <p>Escolha um contato ou grupo para começar a conversar</p>
            </div>
          </div>

          <div id="active-chat" class="active-chat" style="display: none">
            <div class="messages-area">
              <div id="messages-container" class="messages-container"></div>
            </div>
          </div>
        </div>

        <div class="message-input-area" style="display: none">
          <div class="input-container">
            <input
              type="text"
              id="message-input"
              placeholder="Digite sua mensagem..."
            />
            <button id="send-btn" class="send-btn">
              <i class="fa-solid fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div id="accept-chat-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2><i class="fa-solid fa-comment"></i> Solicitação de chat</h2>
          <button class="close-btn"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div class="modal-body">
          <p>
            O usuário <strong>[Nome do Usuário]</strong> gostaria de iniciar um
            chat com você.
          </p>
          <div class="modal-actions">
            <button id="declineChatBtn" class="btn btn-secondary">
              <i class="fa-solid fa-xmark"></i> Recusar
            </button>
            <button id="acceptChatBtn" class="btn btn-primary">
              <i class="fa-solid fa-check"></i> Aceitar
            </button>
          </div>
        </div>
      </div>
    </div>
    <div id="new-chat-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2><i class="fa-solid fa-comment"></i> Novo Chat</h2>
          <button class="close-btn"><i class="fa-solid fa-xmark"></i></button>
        </div>

        <div class="modal-body">
          <p>
            Inicie uma nova conversa com um contato ou solicite participação em
            um grupo.
          </p>

          <div class="tabs">
            <button class="tab-btn active" data-tab="contact">
              <i class="fa-solid fa-user"></i> Contato
            </button>
            <button class="tab-btn" data-tab="group">
              <i class="fa-solid fa-users"></i> Grupo
            </button>
          </div>

          <div id="contact-tab" class="tab-content active">
            <div class="form-group">
              <label for="contact-name">Nome do contato:</label>
              <input
                type="text"
                id="contact-name"
                placeholder="Digite o nome da pessoa"
              />
            </div>
            <div class="info-box">
              <p>Uma solicitação de chat será enviada para esta pessoa.</p>
            </div>
            <button id="add-contact-btn" class="btn btn-primary full-width">
              <i class="fa-solid fa-user"></i> Solicitar Chat
            </button>
          </div>

          <div id="group-tab" class="tab-content">
            <div class="form-group">
              <label for="group-name">Nome do grupo:</label>
              <input
                type="text"
                id="group-name"
                placeholder="Digite o nome do grupo"
              />
            </div>
            <div class="info-box">
              <p>Uma solicitação para participar deste grupo será enviada.</p>
            </div>
            <button id="add-group-btn" class="btn btn-primary full-width">
              <i class="fa-solid fa-users"></i> Solicitar Participação
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="toast-container" class="toast-container"></div>
  </body>
</html>
